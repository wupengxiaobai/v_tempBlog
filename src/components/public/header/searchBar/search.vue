<template>
  <div class="search">
    <div class="searchInp">
      <input-box
        class="input"
        @onQueryChange="onQueryChange"
        @onFocus="onFocus"
        @onBlur="onBlur"
        placeholder="搜索商家或地点"
      ></input-box>
      <span class="el-icon-search"></span>
      <!-- 搜索 -->
      <div v-show="focus" class="searchList">
        <dl v-show="inpnotHasCount" class="recomend">
          <dt>热门搜索</dt>
          <dd>
            <span>
              <router-link tag="span" to="/hot">北京</router-link>
            </span>
            <span>
              <router-link tag="span" to="/hot">上海</router-link>
            </span>
            <span>
              <router-link tag="span" to="/hot">广州</router-link>
            </span>
            <span>
              <router-link tag="span" to="/hot">杭州</router-link>
            </span>
            <span>
              <router-link tag="span" to="/hot">前端NB</router-link>
            </span>
          </dd>
        </dl>
        <dl v-show="inpHasCont" class="keywordL">
          <dd>
            <router-link tag="span" to="/huoguo">火锅</router-link>
          </dd>
          <dd>
            <router-link tag="span" to="/huoguo">火锅</router-link>
          </dd>
          <dd>
            <router-link tag="span" to="/huoguo">火锅</router-link>
          </dd>
          <dd>
            <router-link tag="span" to="/huoguo">火锅</router-link>
          </dd>
          <dd>
            <router-link tag="span" to="/huoguo">火锅</router-link>
          </dd>
        </dl>
      </div>
    </div>

    <div class="underText">
      <span>长鹿旅游休博园</span>
      <span>盈香生态园</span>
      <span>中影星美国际影城</span>
      <span>中央电视台</span>
      <span>南海影视城</span>
      <span>西樵山国艺影视城</span>
    </div>
  </div>
</template>

<script>
import inputBox from "components/base/search-box.vue";
export default {
  data() {
    return {
      focus: false, //  搜索框是否聚焦
      inputVal: ""
    };
  },
  methods: {
    //   输入框内容变化监听函数
    onQueryChange(query) {
      this.inputVal = query;
    },
    onFocus() {
      this.focus = true;
    },
    onBlur() {
      setTimeout(() => {
        this.focus = false;
      }, 200);
    }
  },
  computed: {
    inpHasCont() {
      return this.focus && this.inputVal;
    },
    inpnotHasCount() {
      return this.focus && !this.inputVal;
    }
  },
  components: {
    inputBox
  }
};
</script>

<style lang="stylus" scoped>
@import '~common/stylus/variable.styl';

.search {
  margin-left: 170px;
  width: 552px;

  .searchInp {
    position: relative;
    display: flex;
    margin-bottom: 5px;
    height: 42px;
    border: 1px solid $color-main-border;
    border-radius: 5px;
    box-sizing: border-box;

    .input {
      flex: 0 0 462px;
      width: 462px;
      padding: 10px;
      height: 100%;
      font-size: 15px;
      background: transparent;
      border: 0;
      box-sizing: border-box;
    }

    & > span {
      flex: 1;
      text-align: center;
      line-height: 42px;
      font-size: 15px;
      font-weight: bold;
      background: $color-main;
      color: #fff;
    }

    .searchList {
      padding: 10px;
      position: absolute;
      top: 41px;
      left: 0;
      width: 462px;
      font-size: 12px;
      color: $color-main-text;
      background: #fff;
      border: 1px solid #ddd;
      border-bottom-left-radius: 5px;
      border-bottom-right-radius: 5px;
      box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.1);
      box-sizing: border-box;

      .recomend, .keywordL {
        dt {
          font-weight: bold;
          margin-bottom: 10px;
        }

        dd {
          cursor: pointer;
          margin-right: 5px;

          span {
            margin-right: 2px;

            &:hover {
              cursor: pointer;
              color: $color-main;
            }
          }
        }
      }
    }
  }

  .underText {
    font-size: 12px;
    color: $color-main-text;

    span {
      margin-right: 5px;
      cursor: pointer;

      &:hover {
        color: $color-main;
      }
    }
  }
}
</style>
